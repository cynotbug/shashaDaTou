import{S}from"./search-e07c30fc.js";import{t as E,d as y}from"./collectAndFoot-e0c59b1e.js";import{_ as L,d as M,b as J,v as R,m as w,r as V,o as r,c as i,a as k,w as K,e,F as x,i as B,t as A,p as b,k as X,E as I,x as P}from"./index-3f2c23ac.js";/* empty css                                                               */const _=l=>(b("data-v-93f22b45"),l=l(),X(),l),H={class:"shopRecoed"},W=_(()=>e("div",{class:"fontStyle"},"我的足迹",-1)),O=_(()=>e("div",{class:"shopRecoed-tab"},[e("div",{class:"shopRecoed-tab-inner"},[e("div",{class:"shopRecoed-tab-inner-content"},"我的足迹")])],-1)),Y={class:"mytracks"},q={class:"allTrack"},G={class:"date"},Z={class:"num"},j=["src","onClick"],$=["onClick"],ee={class:"allProduct-content"},te=["onClick"],se=["onClick"],ae=["src"],ne={class:"productName"},oe={style:{display:"flex","align-items":"center"}},ce=["src"],re={class:"company"},ie={key:0,class:"pagination"},le={key:1,class:"noAlldata"},de=["src"],pe=_(()=>e("div",{class:"nodataStyle"},"暂无数据",-1)),Ae={__name:"record",setup(l){const m=M(),d=J([]),c=R({total:0,page:1,size:10}),v=R({contentType:"",content:""});w(()=>{g()});const D=()=>new URL("/assets/product_default-06c28a50.png",self.location).href,Q=()=>new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAADhSURBVDiNxZMxCsJAFETfJoKNnRewsBERfpVWT2AXr6NeR0sPoIKV1aKRFDZ2Ngp2QiCuhVFC3DUIglP9+Tszyy9G4cBWpJfnHa0XNp1ymEcKhvmdgXFH69FbwL7ZrF5rtX4magP4D/PhBksAD7pAI4Vx9usO4Hy5zNRGJPRg4jrlExQMXiQSmUci8zJTUee5hHEQ1G1zEdaAOAjqaZKcNiLhTiRMk+TkCrEGtNbr83NOLbvSgG/w/4CK60HB1Dfm+CBq+nVAW+tBjq5cup+f0ItETJnJZJ2AQhuLFXYhX+07EltHCpe1vj4AAAAASUVORK5CYII=",self.location).href,T=()=>new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAIgSURBVDiNpZFLSNRBHMc/M//X6laLFzVE0WQppSx6opTYpUMFEoFEt04dLMJL5+5BXQohtCToQWAFtQRRp0LtgRH0YCsr0jAwJURyHzPz67C5GWtd/J7m9f3M9zsDy5T614akz9QYE51zyo/CKDyhGo+8/y9AXp8KMWWVVgfbnPI6Be8Q2o/QAfihRQd3CWI3Qj8aYk4mVXJvFsBfAOSy4QfRulaJBuWD9snmDNYayiviHjroRHRnLp9HQjsO1P0FwAtRKgAvAB3wY2aGVF8vCsW+7pMkKmtABHEWxBRt+s8oLJi9kImxMe5dvMDaTc1saNtK6vxpPr18hrN5xJkCpATgheCFDKfu8PDqAOt3bKRhy26mp+bYvqedocEBHl3vA2fA5Yu2RRUK0RuakygyGJUgO5/ha/oVTa0dtB9YSTxRgbg8iFsqQQQ6pLqplWDFama/f0PEkstkGb55ibdPRkhUN4KzYE1pAuWF46L8WvTvJREQRyxexv6jxwtzZxCx4Gy6BOBUdFtp3fbi/i3ePX2MM3mmJr6Q+TlPqr8fRKhNJmnZ1YFW7nIJICpf1ZvLzB6rX7emrqqqHCn2lMLtCLF4AsSOxqanrxWTs0i5z4Obnc0/EGcrxNlC32JsA85OetrtjLX0fCx9RCCsPziK0q04+xxnEFf4d6wBcSNaXNtic0mCBYmIzrzpO+yc6RFnNbiz8XT1FdXVZZc6vyz9AkVs9CujDlc/AAAAAElFTkSuQmCC",self.location).href,z=()=>new URL("/assets/nodata-0198059d.png",self.location).href,N=async o=>{const{value:s,type:n}=o;if(s.length==0)return;let t=n==1?"/supplier":"/shop/productList";m.push({path:t,query:{searchValue:encodeURIComponent(s)}})},U=o=>{console.log("MMMMM"),C().then(()=>{const s={type:1,userTractId:o.userTractId};y(s).then(()=>{I({message:"刪除成功",type:"success"}),g()})}).catch(()=>{})},C=()=>P.confirm("是否确认删除？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),f=o=>{C().then(()=>{const s={createDate:o.tractCreatedDate,type:1};y(s).then(()=>{I({message:"刪除成功",type:"success"}),g()})}).catch(()=>{})},g=()=>{let o={content:v.content,contentType:v.contentType,page:c.page,size:c.size};E(o).then(s=>{d.value=s.records||[],c.total=s.total,d.value=d.value.reduce((n,t,h)=>{let a={};if(h==0)a.tractCreatedDate=t.tractCreatedDate,a.detail=[t],n.push(a);else{const p=n.findIndex(u=>u.tractCreatedDate==t.tractCreatedDate);p>-1?n[p].detail.push(t):(a.tractCreatedDate=t.tractCreatedDate,a.detail=[t],n.push(a))}return n},[])})},F=o=>{const{enterpriseId:s,id:n}=o;m.push({path:`/shop/merchant/${s}/product/detail/${n}`})};return(o,s)=>{const n=V("el-pagination");return r(),i("div",H,[k(S,{onSearch:N},{default:K(()=>[W]),_:1}),O,e("div",Y,[(r(!0),i(x,null,B(d.value,(t,h)=>(r(),i("div",{key:h,class:"mytracks-content"},[e("div",q,[e("span",G,A(t.tractCreatedDate),1),e("span",Z,A(t.detail.length)+"件商品",1),e("img",{src:Q(),style:{"vertical-align":"-2px",cursor:"pointer"},onClick:a=>f(t)},null,8,j),e("span",{class:"del",onClick:a=>f(t)}," 删除全部 ",8,$)]),e("div",ee,[(r(!0),i(x,null,B(t.detail,(a,p)=>(r(),i("div",{key:p,class:"item"},[e("span",{id:"operate",onClick:u=>U(a)},"删除",8,te),e("div",{onClick:u=>F(a)},[e("img",{src:a.image?a.image&&JSON.parse(a.image).url:D(),class:"image"},null,8,ae),e("div",ne,A(a.name),1),e("div",oe,[e("img",{src:T(),class:"iconQiye"},null,8,ce),e("div",re,A(a.enterpriseName),1)])],8,se)]))),128))])]))),128))]),c.total>0?(r(),i("div",ie,[k(n,{"current-page":c.page,"onUpdate:currentPage":s[0]||(s[0]=t=>c.page=t),"page-size":c.size,"onUpdate:pageSize":s[1]||(s[1]=t=>c.size=t),background:"",layout:"prev, pager, next",total:c.total},null,8,["current-page","page-size","total"])])):(r(),i("div",le,[e("div",null,[e("img",{src:z()},null,8,de),pe])]))])}}},me=L(Ae,[["__scopeId","data-v-93f22b45"]]);export{me as default};
